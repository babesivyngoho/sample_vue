import{L as w}from"./leader-line-vue-b24e3c58.js";import{_ as B,r as m,o as h,c as y,d as i,w as l,F as f,e as P,i as b,b as x,a as u,t as v}from"./index-47a93c9c.js";const L={data(){return{supplier_name:"Agrivet Stores",player:null,products:[],data:[],locations:[],locationItems:[],final_actor_data:[],temp_data:null,selectedProduct:null,selectedLocation:null,data_temp:null,actor_data:null,address_data:null,muni_data:null,player_data:[],final_player_data:[],supp_data:[],supplier_data:null,temp_buy_data:[],buy_data:[],player_index:[],buy_index:[],supp_index:[],player_supp_index:[],buyer_data:null,buyer:null,supplier:null,play_data:[],temp_supp_data:[],supp_line:[],buy_line:[],supp_line_supp:[],buy_line_supp:[],colors:["#102820","#4C6444","#CABA9C","#8A6240","#4D2D18"]}},beforeMount(){this.getProducts()},beforeUnmount(){},watch:{selectedProduct:function(a){this.locationItems=[],this.locations=[],this.final_actor_data=[],this.selectedLocation=null,this.getPlayerProducts(a)},selectedLocation:function(a){this.final_player_data=[],this.buy_data=[],this.supp_data=[],this.buyer_data=null,this.temp_buy_data=[],this.temp_supp_data=[],this.player_index=[],this.buy_index=[],this.player_supp_index=[],this.supp_index=[],this.buy_line=[],this.supp_line=[],this.buy_line_supp=[],this.supp_line_supp=[],this.getFinalData(a)}},methods:{async getProducts(){this.data=await this.$store.dispatch("searchAllProducts"),console.log(this.data);for(let a=0;a<this.data.length;a++)this.products.push({id:this.data[a].id,name:this.data[a].name})},async getPlayerProducts(a){console.log(a),this.temp_data=await this.$store.dispatch("searchPlayerByProduct",a),console.log(this.temp_data);for(let r=0;r<this.temp_data.length;r++){this.data_temp=await this.$store.dispatch("searchFinalPlayer",this.temp_data[r].player_id),console.log(this.data_temp[0].business_address_id),this.address_data=await this.$store.dispatch("getBusinessAddress",this.data_temp[0].business_address_id),console.log(this.address_data),this.muni_data=await this.$store.dispatch("getMunicipalityName",this.address_data[0].municipality_city_id),console.log(this.muni_data[0].name);var n=!1;n=this.locationItems.includes(this.muni_data[0].name),n||(this.locationItems.push(this.muni_data[0].name),this.locations.push({id:this.muni_data[0].id,name:this.muni_data[0].name})),this.actor_data=await this.$store.dispatch("searchActor",this.data_temp[0].actor_id),console.log(this.actor_data),this.final_actor_data.push(this.actor_data[0])}},async getPProduct(){this.temp_data=await this.$store.dispatch("searchPlayerByProduct",1),console.log(this.temp_data),this.connectLines()},async getFinalData(a){console.log(this.selectedProduct),console.log(a),console.log(this.final_actor_data);for(let e=0;e<this.final_actor_data.length;e++)this.player_data=await this.$store.dispatch("searchPlayer",this.final_actor_data[e].id),this.address_data=await this.$store.dispatch("getBusinessAddress",this.player_data[0].business_address_id),console.log(this.address_data),this.address_data[0].municipality_city_id==a&&(console.log(this.player_data),this.final_player_data.push(this.final_actor_data[e]));console.log(this.final_player_data);for(let e=0;e<this.final_player_data.length;e++){this.supplier_data=await this.$store.dispatch("getSupplier",this.final_player_data[e].id),console.log(this.final_player_data[e].name),console.log("supplieeer");for(let t=0;t<this.supplier_data.length;t++){console.log(this.supplier_data[t]),this.supplier=await this.$store.dispatch("searchActor",this.supplier_data[t].supplier_actor_id),console.log(this.supplier);var n=this.temp_supp_data.includes(this.supplier[0].name);n?(console.log("indeeeeeex"),console.log(this.temp_supp_data.indexOf(this.supplier[0].name)),this.player_supp_index.push({id:e,name:this.final_player_data[e].name}),this.supp_index.push({id:this.temp_supp_data.indexOf(this.supplier[0].name),name:this.supplier[0].name})):(console.log(this.supplier[0].name),this.temp_supp_data.push(this.supplier[0].name),this.supp_data.push({id:t,name:this.supplier[0].name}),this.player_supp_index.push({id:e,name:this.final_player_data[e].name}),this.supp_index.push({id:this.temp_supp_data.indexOf(this.supplier[0].name),name:this.supplier[0].name}))}this.buyer_data=await this.$store.dispatch("getBuyer",this.final_player_data[e].id),console.log(this.final_player_data[e].name),console.log("buyeeeeer");for(let t=0;t<this.buyer_data.length;t++)if(this.buyer_data[t].output_product_id==this.selectedProduct){console.log(this.buyer_data[t]),this.buyer=await this.$store.dispatch("searchActor",this.buyer_data[t].actor_id);var r=this.temp_buy_data.includes(this.buyer[0].name);r?(console.log("indeeeeeex"),console.log(this.temp_buy_data.indexOf(this.buyer[0].name)),this.player_index.push({id:e,name:this.final_player_data[e].name}),this.buy_index.push({id:this.temp_buy_data.indexOf(this.buyer[0].name),name:this.buyer[0].name})):(console.log(this.buyer[0].name),this.temp_buy_data.push(this.buyer[0].name),this.buy_data.push({id:t,name:this.buyer[0].name}),this.player_index.push({id:e,name:this.final_player_data[e].name}),console.log(this.temp_buy_data.indexOf(this.buyer[0].name)),this.buy_index.push({id:this.temp_buy_data.indexOf(this.buyer[0].name),name:this.buyer[0].name}))}}console.log(this.player_supp_index),console.log(this.supp_index),console.log(this.player_index),console.log(this.buy_index),this.getPProduct()},async connectLines(){console.log("Helloooo connect lines");var a=null,n=0;for(let s=0;s<this.player_supp_index.length;s++){console.log("supplier"+this.player_supp_index[s].id),console.log("supp"+this.supp_index[s].id);var r="supp"+this.player_supp_index[s].id,e="supplier"+this.supp_index[s].id;a==this.player_supp_index[s].id||(n++,a=this.player_supp_index[s].id);var t=new w.setLine(document.getElementById(e),document.getElementById(r),{color:this.colors[n],path:"curve",endPlug:"show"});t.setOptions({startSocket:"right",endSocket:"left"}),this.buy_line_supp.push(t),this.supp_line_supp.push(t)}var g=null,d=0;for(let s=0;s<this.player_index.length;s++){console.log("supp"+this.player_index[s].id),console.log("buy"+this.buy_index[s].id);var c="supp"+this.player_index[s].id,p="buy"+this.buy_index[s].id;g==this.player_index[s].id||(d++,g=this.player_index[s].id);var t=new w.setLine(document.getElementById(c),document.getElementById(p),{color:this.colors[d],path:"curve",endPlug:"show"});t.setOptions({startSocket:"right",endSocket:"left"}),this.buy_line.push(t),this.supp_line.push(t)}}}},k={class:"text-center"},A=u("div",{class:"py"},null,-1),V={class:"text-subtitle-1"},O={class:"text-center"},S=u("div",{class:"py"},null,-1),I={class:"text-subtitle-1"},$={class:"text-center"},C=u("div",{class:"py"},null,-1),D={class:"text-subtitle-1"};function E(a,n,r,e,t,g){const d=m("v-row"),c=m("v-autocomplete"),p=m("v-col"),s=m("v-sheet");return h(),y(f,null,[i(d,{class:"form-style"},{default:l(()=>[i(p,null,{default:l(()=>[i(d,{"no-gutters":""},{default:l(()=>[P("Product")]),_:1}),i(c,{class:"form-style",items:t.products,"item-title":"name","item-value":"id",modelValue:t.selectedProduct,"onUpdate:modelValue":n[0]||(n[0]=o=>t.selectedProduct=o),placeholder:"Select",density:"compact",variant:"outlined"},null,8,["items","modelValue"])]),_:1}),i(p,null,{default:l(()=>[i(d,{"no-gutters":""},{default:l(()=>[P("Location")]),_:1}),i(c,{class:"ma pa-0",items:t.locations,"item-title":"name","item-value":"id",modelValue:t.selectedLocation,"onUpdate:modelValue":n[1]||(n[1]=o=>t.selectedLocation=o),placeholder:"Select",density:"compact",variant:"outlined"},null,8,["items","modelValue"])]),_:1})]),_:1}),i(d,{class:"ma-0"},{default:l(()=>[i(p,{class:"ma-0"},{default:l(()=>[(h(!0),y(f,null,b(t.supp_data,(o,_)=>(h(),x(d,{ref_for:!0,ref:"supp"+o.id,key:_},{default:l(()=>[i(p,null,{default:l(()=>[u("div",k,[i(s,{flat:"",class:"pa-6 bg-brown-lighten-4 rounded-circle d-inline-block",id:"supplier"+_},null,8,["id"]),A,u("code",V,v(o.name),1)])]),_:2},1024)]),_:2},1024))),128))]),_:1}),i(p,{class:"ma-0"},{default:l(()=>[(h(!0),y(f,null,b(t.final_player_data,(o,_)=>(h(),x(d,{ref_for:!0,ref:"supp"+o.id,key:_},{default:l(()=>[i(p,null,{default:l(()=>[u("div",O,[i(s,{flat:"",class:"pa-6 bg-brown-lighten-4 rounded-circle d-inline-block",id:"supp"+_},null,8,["id"]),S,u("code",I,v(o.name),1)])]),_:2},1024)]),_:2},1024))),128))]),_:1}),i(p,{class:"ma-0"},{default:l(()=>[(h(!0),y(f,null,b(t.buy_data,(o,_)=>(h(),x(d,{ref_for:!0,ref:"buy"+o.id,key:_},{default:l(()=>[i(p,null,{default:l(()=>[u("div",$,[i(s,{flat:"",class:"pa-6 bg-brown-lighten-4 rounded-circle d-inline-block",id:"buy"+_},null,8,["id"]),C,u("code",D,v(o.name),1)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})],64)}const U=B(L,[["render",E]]);export{U as default};
